include _header

.container(ng-controller='k$.productsCtrl')
	section.row
		.col.col-sm-12
			h1 Sizzlin' Summer Deals
		.col.col-sm-12
			.thumbnail
				img(src="http://upload.wikimedia.org/wikipedia/commons/{{products[featuredId].img}}")
				.caption
					h3 {{products[featuredId].name}}
					p {{products[featuredId].desc}}
					p
						a.btn.btn-primary(href="cart.html") Add to cart
	section.row
		.col.col-sm-12
			h1 On Sale Now
			p.lead Get them before they're gone
	section.row
		div.col.col-sm-3
			article.panel.panel-default
				.panel-heading 
					input.form-control(type='text', ng-model='productInput', placeholder='Search products')
				.list-group
					a.list-group-item(
						ng-href='{{"#"}}{{slug(product.name)}}', ng-repeat='product in products | filter: productInput'
						ng-click="setSelectedProduct(product)"
						ng-class="{'active': selectedProduct.id == product.id }"
					) {{product.name}}

		div.col.col-sm-9
			article.panel.panel-default.hover-grp(ng-repeat='product in products | filter: productInput')
				.panel-body
					.media
						img.media-object.pull-left(src="http://api.rethumb.com/v1/square/128/http://upload.wikimedia.org/wikipedia/commons/{{product.img}}", style="width: 64px;")
						.media-body
							h4.media-heading(ng-id='slug(product.name)') {{product.name}}
							p {{product.desc}}
				.panel-footer.uncloak-hover
					a.btn.btn-primary(href="cart.html") Add to cart

script(src='js/demo/products.js')
script(src='js/demo/product-list.js')