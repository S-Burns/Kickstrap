// A header is omitted here to encourage users to complete their purchase.

.container
	section.row
		div.col.col-sm-12
			h1 Shopping Cart
	section.row(ng-controller='k$.cartCtrl')
		link(
			ng-repeat='product in products'
			rel="prerender", 
			href="http://api.rethumb.com/v1/square/120/http://upload.wikimedia.org/wikipedia/commons/{{product.img}}"
		)
		div.col.col-sm-3
			p.lead Thank you for your business
			p.alert.alert-warning(ng-show="lastRemoved")
				| {{lastRemoved.product.name}} Removed.&nbsp;
				a(href='#', ng-show='lastRemoved', ng-click="restorePurchase(lastRemoved)") Undo.
		
		nav.navbar.navbar-default.visible-sm.visible-xs#message
			.container
				ul.nav.navbar-nav	
					li
						a(href="#") 
							span.glyphicon.glyphicon-chevron-left 
							|  Cart 
		div.col.col-sm-6
			article.panel.panel-default
				.panel-heading Items in cart
				ul.list-group
					li.list-group-item(ng-repeat='purchase in purchases')
						.media
							img.media-object.pull-left(src="http://api.rethumb.com/v1/square/128/http://upload.wikimedia.org/wikipedia/commons/{{purchase.product.img}}", style="width: 64px;")
							.media-body
								h4.media-heading {{purchase.product.name}}
								p
									em {{purchase.product.price | currency:'$'}} x
									input(type="text", ng-model="purchase.quantity")
								hr
								p.text-muted(style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;") {{ (purchase.product.price * purchase.quantity) | currency:"$"}}
								p.pull-right
									a(href="#", ng-click="deletePurchase(purchase.product.id)") Remove
					li.list-group-item(ng-show='purchases.length < 1')
						em There are currently no items in your cart.
						p
							a(href="products.html") Go shopping
		div.col.col-sm-3
			article.panel.panel-default
				.panel-heading Checkout
				.panel-body
					p Total: 
						strong {{ total() | currency:'$' }}
					a.btn.btn-primary Purchase


script(src='js/demo/products.js')
script(src='js/demo/cart.js')